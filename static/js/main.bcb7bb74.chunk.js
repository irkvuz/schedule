(this.webpackJsonpbgu=this.webpackJsonpbgu||[]).push([[0],{189:function(e,t,a){e.exports=a(321)},313:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),o=a.n(c),l=(a(194),a(20)),s=a(180),u=a.n(s),i=a(39),m=a(27),d=a(170),f=a(171),h=a(184),p=a(183),E=a(326),g=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={error:null,errorInfo:null},e}return Object(f.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t}),E.c(e)}},{key:"render",value:function(){return this.state.errorInfo?r.a.createElement("div",null,r.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u043e\u0431\u0449\u0438 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435"," ",r.a.createElement("a",{href:"https://vk.com/savinyurii"},"\u043c\u043d\u0435 \u0432 \u0412\u041a")," \u0438\u043b\u0438"," ",r.a.createElement("a",{href:"https://t.me/yurasvn"},"\u0432 Telegram"),", \u044f \u0441\u0434\u0435\u043b\u0430\u044e \u0432\u0441\u0451 \u043e\u0442 \u043c\u0435\u043d\u044f \u0437\u0430\u0432\u0438\u0441\u044f\u0449\u0435\u0435 \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c :)"),r.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),r.a.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}]),a}(r.a.Component),v=(a(197),a(53)),y=a(81),b=a(58),w=a.n(b),O=a(73),k=(a(323),a(126)),N=(a(147),a(111)),I=a(37),S=a(173),j=a.n(S);function _(e){return F.apply(this,arguments)}function F(){return(F=Object(O.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T={getFaculties:function(){return _("/data/faculties.json")},getFacultiesWithGroups:function(){return _("/data/facultiesWithGroups.json")},getGroups:function(e){return _("/data/groups/".concat(e,".json"))},getTrimesters:function(){return _("/data/trimesters.json")},getSchedule:function(e,t){return _("/data/schedule/".concat(t,"/").concat(e,".json"))}};function C(e){var t=e.title,a=e.items,c=e.loading,o=Object(n.useState)(""),l=Object(I.a)(o,2),s=l[0],u=l[1],i=a.filter((function(e){if("Group"in e)return e.Group.match(new RegExp(s,"i"));if("FacultyName"in e)return e.FacultyName.match(new RegExp(s,"i"));throw new Error("Unknown data format (ot IGroupOld nor IFacultyOld)")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,t),r.a.createElement(N.a.Search,{"data-testid":"input-search",onChange:function(e){var t=e.target.value;u(t)},placeholder:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435..."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.b,{dataSource:i,loading:c,bordered:!0,renderItem:function(e){if("Group"in e)return r.a.createElement(k.b.Item,{key:e.IdGroup},e.hasSchedule||!e.hasOwnProperty("hasSchedule")?r.a.createElement(y.a,{to:"".concat(e.IdGroup,"/")},e.Group):r.a.createElement("span",{style:{opacity:.5}},e.Group));if("FacultyName"in e)return r.a.createElement(k.b.Item,{key:e.IdFaculty},r.a.createElement(y.a,{to:"".concat(e.IdFaculty,"/")},e.FacultyName));throw new Error("Unknown data format (ot IGroupOld nor IFacultyOld)")}}))}function G(e){var t=Object(n.useState)([]),a=Object(I.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(I.a)(l,2),u=s[0],i=s[1];return Object(n.useEffect)((function(){function t(){return(t=Object(O.a)(w.a.mark((function t(){var a;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.promise;case 3:a=t.sent,o(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:i(!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}i(!0),function(){t.apply(this,arguments)}()}),[e.promise]),r.a.createElement(C,{title:e.title,items:c,loading:u})}function W(){if("?throwError"===document.location.search)throw new Error("ListFaculties throw some error!!1");return r.a.createElement(G,{promise:T.getFaculties(),title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u043e\u0432"})}function L(e){var t=e.match.params.facultyId;return r.a.createElement(G,{promise:T.getGroups(t),title:"\u0421\u043f\u0438\u0441\u043e\u043a \u0433\u0440\u0443\u043f\u043f"})}a(166);var R=a(84),x=(a(303),a(182));var D=function(e){return r.a.createElement(x.a,{options:e.facultiesWithGroups,onChange:e.onChange,allowClear:!1,size:"large",defaultValue:[e.facultyId,e.groupId],fieldNames:{label:"name",value:"id",children:"groups"},showSearch:{filter:function(e,t,a){return t.some((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}))}}})},A=Number(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_VERSION:"0.2.5",REACT_APP_NAME:"bgu"}).YANDEX_METRIKA_IDENTIFIER);function P(e){if("function"!==typeof window.ym)throw new Error("Tracking is missing");window.ym(A,"reachGoal",e)}var M=a(335),z=a(338),K=a(337),U=a(339);function Y(e,t){var a=Object(M.a)(e.dateStart),n=Object(M.a)(e.dateFinish),r=function(e,t){var a=Object(M.a)(e);return Object(U.a)(t,a)+1}(e.dateStart,t),c=Object(z.a)(n,a)+1;return{weekNumberInSemester:r,weekNumberInYear:r+15,weeksInSemester:c,weeksInYear:c+15,dateStartString:Object(K.a)(a,"dd.MM.yyyy"),dateFinishString:Object(K.a)(n,"dd.MM.yyyy")}}a(305);var H=a(185),B=(a(322),a(181)),V=a(178),q=(a(130),a(80)),J=(a(311),a(140)),X=a(340),$=a(341),Q=a(342),Z=a(336),ee="\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0412\u0442\u043e\u0440\u043d\u0438\u043a_\u0421\u0440\u0435\u0434\u0430_\u0427\u0435\u0442\u0432\u0435\u0440\u0433_\u041f\u044f\u0442\u043d\u0438\u0446\u0430_\u0421\u0443\u0431\u0431\u043e\u0442\u0430_\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435".split("_");a(313);var te=J.a.TabPane,ae=[{shortName:"\u0432\u043d\u0435",fullName:"\u0432\u043d\u0435\u0443\u0447\u0435\u0431\u043d\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435",className:"lek0"},{shortName:"\u043b",fullName:"\u043b\u0435\u043a\u0446\u0438\u044f",className:"lek1"},{shortName:"\u043f\u0440",fullName:"\u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435",className:"lek2"},{shortName:"\u043b\u0430\u0431",fullName:"\u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430",className:"lek3"},{shortName:"\u0437\u0430\u0447",fullName:"\u0437\u0430\u0447\u0435\u0442",className:"lek4"},{shortName:"\u044d\u043a\u0437",fullName:"\u044d\u043a\u0437\u0430\u043c\u0435\u043d",className:"lek5"},{shortName:"\u043a\u043e\u043d\u0441",fullName:"\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u044f",className:"lek6"},{shortName:"\u043f/\u0441",fullName:"\u043f\u0435\u0440\u0435\u0441\u0434\u0430\u0447\u0430",className:"lek7"},{shortName:"",fullName:"\u0432\u043d\u0435\u043f\u043b\u0430\u043d\u043e\u0432\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435",className:"lek8"},{shortName:"\u0442\u0435\u0441\u0442",fullName:"\u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",className:"lek9"},{shortName:"\u043f\u043e\u0434\u0433",fullName:"\u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043a\u0443\u0440\u0441\u044b",className:"lek10"},{shortName:"\u043e\u043b",fullName:"\u043e\u043b\u0438\u043c\u043f\u0438\u0430\u0434\u0430",className:"lek11"},{shortName:"\u043a\u043e\u043d\u0444",fullName:"\u043d\u0430\u0443\u0447\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u044f",className:"lek12"},{shortName:"\u043e\u0442\u043a\u0440",fullName:"\u0434\u0435\u043d\u044c \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u0445 \u0434\u0432\u0435\u0440\u0435\u0439",className:"lek13"}],ne=[{key:"first",className:"StartTime_Room",render:function(e,t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"StartTime"},r.a.createElement(X.a,null)," ",t.StartTime),r.a.createElement("div",{className:"Room"},r.a.createElement($.a,null)," ",t.Room))}},{key:"second",render:function(e,t,a){var n=ae.find((function(e){return e.shortName===t.LessonType}))||ae[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("span",{title:n.fullName,className:"LessonType ".concat(n.className)},t.LessonType),"\xa0",t.Lesson),r.a.createElement("div",{title:t.FIO},r.a.createElement(Q.a,null)," ",t.FIO))}}];var re=function(e){var t=Object(n.useState)("top"),a=Object(I.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(I.a)(l,2),u=s[0],i=s[1],m=Object(n.useState)("1"),d=Object(I.a)(m,2),f=d[0],h=d[1];if(Object(n.useEffect)((function(){var e=function(){o(window.innerWidth>window.innerHeight?"left":"top")};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(n.useEffect)((function(){if(void 0!==e.schedule){var t=function(e){var t=e.week_number,a=e.weekday,n=e.schedule,r=t%2===0,c=n.map((function(e){return e.WeekDay})).reduce((function(e,t,c){var o=n[c];return 0===o.Odd&&t<a||1===o.Odd&&r||2===o.Odd&&!r?t+=7:t<a&&(t+=14),Math.min(e,t)}),15);return c>14?c-=14:c>7&&(c-=7,r=!r),{minWeekday:c,parity:r}}({week_number:e.week_number,weekday:Object(Z.a)(e.today),schedule:e.schedule}),a=t.minWeekday,n=t.parity;h(String(a)),i(n)}}),[e.schedule,e.week_number,e.today]),e.loading)return r.a.createElement(q.a,{"data-testid":"loading-spinner"});for(var p=[],E=1;E<=7;E++)p[E]={name:ee[E],lessons:[]};if(!e.schedule||e.schedule.length<=1)return r.a.createElement("div",null,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0434\u043b\u044f \u044d\u0442\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u044b \u043d\u0435\u0442 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f");var g,v=Object(V.a)(e.schedule);try{for(v.s();!(g=v.n()).done;){var y=g.value;!y.Error&&(0===y.Odd||u&&2===y.Odd||!u&&1===y.Odd)&&p[y.WeekDay].lessons.push(y)}}catch(w){v.e(w)}finally{v.f()}var b=p.map((function(e,t){return 0===e.lessons.length?null:r.a.createElement(te,{tab:e.name,key:String(t)},r.a.createElement(B.a,{dataSource:e.lessons,columns:ne,size:"small",className:"Schedule",showHeader:!1,pagination:!1,rowKey:function(e){return e.WeekDay+e.StartTime+e.Odd+e.Lesson+e.LessonType+e.FIO}}))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"switch-parity"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0435\u0434\u0435\u043b\u044e: \xa0",r.a.createElement(H.a,{checkedChildren:"\u0447",unCheckedChildren:"\u043d",checked:u,onChange:function(e){i(e),R.b.info("\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0430 ".concat(e?"\u0447\u0435\u0442\u043d\u0430\u044f":"\u043d\u0435\u0447\u0435\u0442\u043d\u0430\u044f"," \u043d\u0435\u0434\u0435\u043b\u044f"),1),P("toggle_parity")},"data-testid":"week-parity-switcher"})),r.a.createElement(J.a,{defaultActiveKey:f,tabPosition:c,animated:!1,onChange:function(e){console.log(e),P("change_weekday")}},b))},ce=(a(314),a(186));function oe(e){var t=e.trimesterInfo,a=t.weekNumberInSemester,n=t.weekNumberInYear,c=t.weeksInSemester,o=t.weeksInYear,l=t.dateStartString,s=t.dateFinishString;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"\u0421\u0435\u0433\u043e\u0434\u043d\u044f ",ee[Object(Z.a)(e.today)%7],","," ",Object(K.a)(e.today,"dd.MM.yyyy"),","," ",a>=1&&r.a.createElement(r.a.Fragment,null,"\u043d\u0435\u0434\u0435\u043b\u044f \u0432 ",o===c?"\u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0435":"\u0433\u043e\u0434\u0443"," ",n," \u0438\u0437 ",o," (",n%2===0?"\u0427\u0435\u0442\u043d\u0430\u044f":"\u041d\u0435\u0447\u0435\u0442\u043d\u0430\u044f",")"),a<1&&r.a.createElement(r.a.Fragment,null,"\u0441\u0435\u043c\u0435\u0441\u0442\u0440 \u0435\u0449\u0435 \u043d\u0435 \u043d\u0430\u0447\u0430\u043b\u0441\u044f, \u043f\u0435\u0440\u0432\u0430\u044f \u043d\u0435\u0434\u0435\u043b\u044f \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u0447\u0435\u0442\u043d\u0430\u044f")),r.a.createElement("div",null,"\u0421\u0435\u043c\u0435\u0441\u0442\u0440: ",l," - ",s),a>c&&r.a.createElement(ce.a,{type:"warning",showIcon:!0,message:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u0441\u0435\u043c\u0435\u0441\u0442\u0440 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0441\u044f. \u0421\u0435\u0439\u0447\u0430\u0441 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0448\u0435\u0434\u0448\u0435\u0433\u043e \u0441\u0435\u043c\u0435\u0441\u0442\u0440\u0430."}))}function le(e){var t=Object(n.useState)([]),a=Object(I.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(),s=Object(I.a)(l,2),u=s[0],i=s[1],m=Object(n.useState)([]),d=Object(I.a)(m,2),f=d[0],h=d[1],p=Object(n.useState)(!1),E=Object(I.a)(p,2),g=E[0],v=E[1],y=Object(n.useState)([]),b=Object(I.a)(y,2),k=b[0],N=b[1],S=function(){var e=Object(O.a)(w.a.mark((function e(t,a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,localStorage.setItem("facultyId",t),localStorage.setItem("groupId",a),e.next=6,T.getSchedule(a,n);case 6:r=e.sent,h(r),v(!1),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(1),v(!1),h([]),e.t0.response?(console.log(e.t0.response.data),console.log(e.t0.response.status),console.log(e.t0.response.headers)):e.t0.request?(console.log(e.t0.request),R.b.error("\u041d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f")):console.log("Error",e.t0.message),console.log(e.t0.config);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a,n){return e.apply(this,arguments)}}(),j=e.match.params,_=j.groupId,F=j.facultyId;Object(n.useEffect)((function(){T.getFacultiesWithGroups().then((function(e){N(e)})),T.getTrimesters().then((function(e){o(e)}))}),[]),Object(n.useEffect)((function(){u&&S(F,_,u)}),[F,_,u]),Object(n.useEffect)((function(){var e=k.find((function(e){return e.id===F})),t=null===e||void 0===e?void 0:e.groups.find((function(e){return e.id===_})),a=null===t||void 0===t?void 0:t.trimesterId;i(a)}),[k,c,F,_]);var C=c.find((function(e){return e.IdTrimester===u})),G=C?Y(C,e.today):void 0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(D,{facultiesWithGroups:k,facultyId:F,groupId:_,onChange:function(t,a){var n=Object(I.a)(t,2),r=n[0],c=n[1],o="/".concat(r,"/").concat(c);e.history.push(o),P("change_group_cascader")}})),r.a.createElement("div",null,G&&r.a.createElement(oe,{trimesterInfo:G,today:e.today})),r.a.createElement("div",null,r.a.createElement(re,{loading:g,schedule:f,week_number:(null===G||void 0===G?void 0:G.weekNumberInSemester)||0,today:e.today})))}var se=function(){var e=new URLSearchParams(document.location.search),t=e.has("today")?new Date(e.get("today")||""):new Date;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(v.a,{mode:"horizontal",theme:"dark"},r.a.createElement(v.a.Item,{key:"faculties"},r.a.createElement(y.a,{to:"/faculties"},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0411\u0413\u0423")))),r.a.createElement("div",{className:"content-wrapper"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/:facultyId(\\d+)/:groupId(\\d+)",render:function(e){return r.a.createElement(le,Object.assign({},e,{today:t}))}}),r.a.createElement(m.b,{path:"/:facultyId(\\d+)",component:L}),r.a.createElement(m.b,{path:"/faculties",component:W}),r.a.createElement(m.b,{path:"/",render:function(e){var t=localStorage.facultyId,a=localStorage.groupId,n=e.location.search+e.location.hash;return t&&a?r.a.createElement(m.a,{to:"/".concat(t,"/").concat(a).concat(n)}):r.a.createElement(m.a,{to:"/faculties"+n})}}))),r.a.createElement("footer",null,"\u0421\u0434\u0435\u043b\u0430\u043d\u043e \u0441 \u2764 \xa0",r.a.createElement("a",{href:"https://vk.com/irkvuz",target:"_blank",rel:"noopener noreferrer",onClick:function(e){P("click_vk")}},"\u0432 \u0418\u0440\u043a\u0443\u0442\u0441\u043a\u0435")))};(function(){var e=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(e)})()&&window.navigator.standalone&&setTimeout((function(){P("standalone")}),5e3);var ue=Object(i.a)();function ie(){return r.a.createElement(g,null,r.a.createElement(l.a,{locale:u.a},r.a.createElement(m.c,{history:ue},r.a.createElement(se,null))))}ue.listen((function(e,t){(function(e){if("function"!==typeof window.ym)throw new Error("Tracking is missing");window.ym(A,"hit",e)})(e.pathname+e.search+e.hash)}));a(320),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.e(3).then(a.bind(null,330)).then((function(e){e.init({dsn:"https://d8656cdb1f434597aecff05537459326@sentry.io/1537635",release:"0.2.5"})})),o.a.render(r.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[189,1,2]]]);
//# sourceMappingURL=main.bcb7bb74.chunk.js.map